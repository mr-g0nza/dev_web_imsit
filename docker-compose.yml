version: '3.8'
services:
  web:
    build: .
    ports:
      - "9002:9002"
    command: npm run dev
    volumes:
      - .:/usr/src/app
      - /usr/src/app/node_modules
      - /usr/src/app/.next
    environment:
      - NODE_ENV=development
      - GENKIT_ENV=dev

  genkit:
    build: .
    command: npm run genkit:watch
    ports:
      - "4000:4000" # Genkit UI
      - "3100:3100" # Genkit Flow server
    volumes:
      - .:/usr/src/app
      - /usr/src/app/node_modules
    environment:
      - NODE_ENV=development
      - GENKIT_ENV=dev
      # Убедитесь, что у вас есть файл .env с вашим GEMINI_API_KEY
      # или раскомментируйте и установите его здесь
      # - GEMINI_API_KEY=your_gemini_api_key

